#Android开发架构规范

##命名规范

### 包名
* 包名全部采用小写
* 以功能进行分类，易于维护

![] (image/pic1.png)

### 代码命名规范

代码规范可参考阿里巴巴java规范

##编程规范

* 源文件编码格式为 UTF-8。
* java代码中不出现中文，最多注释中可以出现中文
* 服务端可以实现的，就不要放在客户端
* 引用第三方库要慎重，避免应用大容量的第三方库，导致客户端包非常大
* 处理应用全局异常和错误，将错误以邮件的形式发送给服务端
* 图片的.9处理
* 使用静态变量方式实现界面间共享要慎重
* 单元测试（逻辑测试、界面测试）
* 不要重用父类的handler，对应一个类的handler也不应该让其子类用到，否则会导致message.what冲突
* activity中在一个View.OnClickListener中处理所有的逻辑
* strings.xml中使用%1$s实现字符串的通配
* 数据一定要效验，例如字符型转数字型，如果转换失败一定要有缺省值；服务端响应数据是否有效判断
* 对于未完成的方法，使用TODO加以标记
* 若功能已完成，但存在效率等潜在问题时，使用XXX加以标记
* 若代码存在严重问题或仅用于调试，使用FIXME加以标记
* values目录下文件名称较固定，不得随意更改

## 代码提交规范

* 工作目录要及时更新，不要和服务器有太大的差别
* 提交代码时，如果出现冲突，必须仔细分析解决，不可以强行提交
* 提交代码之前先在本地进行测试，确保项目能编译通过，且能够正常运行，不可盲目提交
* 必须保证服务器上的版本是正确的，项目有错误时，不要进行提交
* 提交之前先更新
* 提交时注意不要提交本地自动生成的文件，比如我们Android Studio项目中的 idea,build文件夹是不需要提交的。
* 不要提交自己不明白的代码
* 提前协调好项目组成员的工作计划，减少冲突
* 对提交的信息采用明晰的标注（写注释）

## 架构规范

### 开源库的选取和封装
对开源库的选取，一般都需要选择比较稳定的版本，还有作者在维护的项目。除了考虑star，还要考虑作者对issue的解决，以及开发者的知名度等各方面。最好选用稳定大公司的开源库。  
**选取开源库后，要进行一定的封装，最好做到能够一键替换。**

[链接--如何正确使用开源项目](https://mp.weixin.qq.com/s?__biz=MzA4NTQwNDcyMA==&mid=2650661623&idx=1&sn=ab28ac6587e8a5ef1241be7870851355)

## 附录

###架构设计原则

架构坚持组件化，持续重构，小而美。架构设计十大原则：

1.**全面解耦原则**：对业务进行抽象建模，业务数据与业务逻辑解耦，软硬件解耦，平台和产品解耦，系统各部件解耦。模块、组件高内聚，低耦合。

2.**服务化/组件化原则**：以服务、数据为中心，构建服务化、组件化架构，具备灵活，按需组合的能力。

3.**接口隔离及服务自治原则**：通过接口隐藏服务/组件实现细节，服务/组件只能通过接口进行交互，接口契约化，标准化，跨版本兼容；服务/组件可独立发展、独立发布、独立升级，服务自治，可视、可管、可控、可测、可维，故障自愈。

4.**弹性伸缩原则**：构建全分布云化架构，或借鉴云化架构思想，每个服务具备横向扩展能力，支持按需使用，自动弹性伸缩，可动态替换、灵活部署，支撑高性能、高吞吐量、高并发、高可用业务场景。

5.**安全可靠环保原则**：构建最小权限，纵深防御、最小公共化、权限分离、不轻信、开放设计、完全仲裁、失效安全、保护薄弱环节、安全机制、经济性、用户接受度以及加强隐私保护的安全体系，确保系统、网络和数据的机密性、完整性、可用性、可追溯性；以业务系统零故障为导向；按需构筑分层分级的可靠性，通过故障的预流、预防、快速故障恢复、避免故障发生；系统资源使用有效最大化，实现节能、节地、节材、环保。

6.**用户体验和自动化运维原则**：面向业务获取和使用场景，构建实时、按需、在线、自助、社区化、方便易用的用户体验；支持远程、自动、智能、安全、高效地完成网规/网设、安装、部署、调测、验收、扩缩容、软件升级、打补丁、日常维护、问题处理。

7.**开放生态原则**：面向生态场景，按需开放平台设施、中间件、数据、业务逻辑、UI等能力；构建开放生态、支持分层、远程、自动、自助、简单高效地完成定制、集成、第三方应用开发。

8.**高效开发原则**：创建支持迭代、增量、持续交付的架构，支持部件独立开发、自动化编译构建、测试、集成验证、并易于高效修改和持续优化；支持开发组织小型化，扁平化，支持小团队独立高效并行开发。

9.**柔性供应制造原则**：模块化设计，模块/物料归一化、标准化，支持自动化、数字化、智能化、随需应变的柔性制造。

10.**持续演进原则**：架构并非一蹴而就，需要有效地管理架构需求；持续构建和发展架构，适应业务需求变化，适时引入业界最佳实践，及时重构，确保架构生命力和竞争力。

